exports[`cli > for-each-async: errors if no inputs are given to for-each-async 1`] = `
"{\\"stdout\\":\\"\\",\\"stderr\\":\\"\\\\u001b[31m\\\\u001b[1mNo inputs were given to the for-each-async command.\\\\u001b[0m\\\\n\\",\\"exitCode\\":1,\\"args\\":\\"for-each-async\\"}"
`;

exports[`cli > for-each-async: errors if one of the scripts fails 1`] = `
"{\\"stderr\\":\\"\\\\u001b[36m[chai]\\\\u001b[0m exited with exit code 1.\\\\u001b[0m\\\\n\\\\u001b[33m\\\\u001b[7m[prisma-node-js]\\\\u001b[0m exited with exit code 1 (cancelled).\\\\u001b[0m\\\\n\\\\u001b[32m\\\\u001b[7m[scripts]\\\\u001b[0m exited with exit code 1 (cancelled).\\\\u001b[0m\\\\n\\\\u001b[31m\\\\u001b[7m[docker]\\\\u001b[0m exited with exit code 1 (cancelled).\\\\u001b[0m\\\\n\\\\u001b[33m[testing]\\\\u001b[0m exited with exit code 1 (cancelled).\\\\u001b[0m\\\\n\\\\u001b[32m[browser-testing]\\\\u001b[0m exited with exit code 1 (cancelled).\\\\u001b[0m\\\\n\\",\\"exitCode\\":1,\\"args\\":\\"for-each-async npm run --silent mono-vir-test:one-failure\\"}"
`;

exports[`cli > for-each-async: errors if the given command is invalid 1`] = `
"{\\"stdout\\":\\"NAME\\\\n    mono-vir\\\\n\\\\nSYNOPSIS\\\\n    mono-vir [options] <command> [<command-inputs...>]\\\\n\\\\nPOSITIONAL ARGUMENTS\\\\n    <command>                   Available mono-vir commands.\\\\nfor-each: run for each package sequentially in package dependency order.\\\\nfor-each-async: run for each package all in parallel. (required; type: for-each|for-each-async) Stops option parsing; all following arguments are treated as positional.\\\\n    <command-inputs...>         (optional; type: string; rest)\\\\n\\\\nOPTIONS\\\\n    (All option keys are case-insensitive; snake_case, camelCase, and kebab-case variants are accepted.)\\\\n\\\\n    --help                      Print this help message.\\\\n\\\\n\\",\\"stderr\\":\\"\\\\u001b[31m\\\\u001b[1mInvalid command argument: Expected one of for-each, for-each-async\\\\u001b[0m\\\\n\\\\u001b[31m\\\\u001b[1mInvalidArgError: Invalid command argument: Expected one of for-each, for-each-async\\\\n    at parseRawValue (file://.//node_modules/cli-vir/dist/parse-args.js:317:19)\\\\n    at parseArgValue (file://.//node_modules/cli-vir/dist/parse-args.js:263:16)\\\\n    at file://.//node_modules/cli-vir/dist/parse-args.js:147:31\\\\n    at file://.//node_modules/@augment-vir/common/dist/augments/object/map-values.js:41:29\\\\n    at Array.reduce (<anonymous>)\\\\n    at mapObjectValues (file://.//node_modules/@augment-vir/common/dist/augments/object/map-values.js:40:58)\\\\n    at parseStrippedArgs (file://.//node_modules/cli-vir/dist/parse-args.js:127:28)\\\\n    at parseArgs (file://.//node_modules/cli-vir/dist/parse-args.js:244:12)\\\\n    at runMonoVirCli (.//node_modules/mono-vir/src/cli/cli.ts:13:35)\\\\n    at <anonymous> (.//node_modules/mono-vir/src/cli/cli.script.ts:5:7)\\\\u001b[0m\\\\n\\",\\"exitCode\\":1,\\"args\\":\\"fake-command npm run --silent mono-vir-test:success\\"}"
`;

exports[`cli > for-each-async: successfully runs for-each-async 1`] = `
"{\\"stderr\\":\\"\\",\\"exitCode\\":0,\\"args\\":\\"for-each-async npm run --silent mono-vir-test:success\\"}"
`;

exports[`cli > for-each: errors if no inputs are given to for-each 1`] = `
"{\\"stdout\\":\\"\\",\\"stderr\\":\\"\\\\u001b[31m\\\\u001b[1mNo inputs were given to the for-each-async command.\\\\u001b[0m\\\\n\\",\\"exitCode\\":1,\\"args\\":\\"for-each\\"}"
`;

exports[`cli > for-each: errors if one of the scripts fails 1`] = `
"{\\"stdout\\":\\"\\\\u001b[31m[common]\\\\u001b[0m .//test-files/augment-vir/packages/common\\\\u001b[0m\\\\n\\\\u001b[31m[common]\\\\u001b[0m exited with exit code 0.\\\\u001b[0m\\\\n\\\\u001b[33m[testing]\\\\u001b[0m .//test-files/augment-vir/packages/testing\\\\u001b[0m\\\\n\\\\u001b[33m[testing]\\\\u001b[0m exited with exit code 0.\\\\u001b[0m\\\\n\\\\u001b[32m[browser-testing]\\\\u001b[0m .//test-files/augment-vir/packages/browser-testing\\\\u001b[0m\\\\n\\\\u001b[32m[browser-testing]\\\\u001b[0m exited with exit code 0.\\\\u001b[0m\\\\n\\\\n\\\\n\\\\u001b[1mRunStorm Summary:\\\\u001b[0m\\\\n        \\\\u001b[34m[browser]\\\\u001b[0m \\\\u001b[90m\\\\u001b[1mcancelled.\\\\u001b[0m\\\\n\\\\u001b[32m[browser-testing]\\\\u001b[0m \\\\u001b[32m\\\\u001b[1msucceeded.\\\\u001b[0m\\\\n           \\\\u001b[36m[chai]\\\\u001b[0m \\\\u001b[31m\\\\u001b[1mfailed.\\\\u001b[0m\\\\n         \\\\u001b[31m[common]\\\\u001b[0m \\\\u001b[32m\\\\u001b[1msucceeded.\\\\u001b[0m\\\\n   \\\\u001b[37m[common-tests]\\\\u001b[0m \\\\u001b[90m\\\\u001b[1mcancelled.\\\\u001b[0m\\\\n         \\\\u001b[31m\\\\u001b[7m[docker]\\\\u001b[0m \\\\u001b[90m\\\\u001b[1mcancelled.\\\\u001b[0m\\\\n    \\\\u001b[35m[element-vir]\\\\u001b[0m \\\\u001b[90m\\\\u001b[1mcancelled.\\\\u001b[0m\\\\n        \\\\u001b[30m[node-js]\\\\u001b[0m \\\\u001b[90m\\\\u001b[1mcancelled.\\\\u001b[0m\\\\n \\\\u001b[33m\\\\u001b[7m[prisma-node-js]\\\\u001b[0m \\\\u001b[90m\\\\u001b[1mcancelled.\\\\u001b[0m\\\\n        \\\\u001b[32m\\\\u001b[7m[scripts]\\\\u001b[0m \\\\u001b[90m\\\\u001b[1mcancelled.\\\\u001b[0m\\\\n        \\\\u001b[33m[testing]\\\\u001b[0m \\\\u001b[32m\\\\u001b[1msucceeded.\\\\u001b[0m\\\\n\\\\n\\\\n\\",\\"stderr\\":\\"\\\\u001b[36m[chai]\\\\u001b[0m exited with exit code 1.\\\\u001b[0m\\\\n\\",\\"exitCode\\":1,\\"args\\":\\"for-each npm run --silent mono-vir-test:one-failure\\"}"
`;

exports[`cli > for-each: errors if the given command is invalid 1`] = `
"{\\"stdout\\":\\"NAME\\\\n    mono-vir\\\\n\\\\nSYNOPSIS\\\\n    mono-vir [options] <command> [<command-inputs...>]\\\\n\\\\nPOSITIONAL ARGUMENTS\\\\n    <command>                   Available mono-vir commands.\\\\nfor-each: run for each package sequentially in package dependency order.\\\\nfor-each-async: run for each package all in parallel. (required; type: for-each|for-each-async) Stops option parsing; all following arguments are treated as positional.\\\\n    <command-inputs...>         (optional; type: string; rest)\\\\n\\\\nOPTIONS\\\\n    (All option keys are case-insensitive; snake_case, camelCase, and kebab-case variants are accepted.)\\\\n\\\\n    --help                      Print this help message.\\\\n\\\\n\\",\\"stderr\\":\\"\\\\u001b[31m\\\\u001b[1mInvalid command argument: Expected one of for-each, for-each-async\\\\u001b[0m\\\\n\\\\u001b[31m\\\\u001b[1mInvalidArgError: Invalid command argument: Expected one of for-each, for-each-async\\\\n    at parseRawValue (file://.//node_modules/cli-vir/dist/parse-args.js:317:19)\\\\n    at parseArgValue (file://.//node_modules/cli-vir/dist/parse-args.js:263:16)\\\\n    at file://.//node_modules/cli-vir/dist/parse-args.js:147:31\\\\n    at file://.//node_modules/@augment-vir/common/dist/augments/object/map-values.js:41:29\\\\n    at Array.reduce (<anonymous>)\\\\n    at mapObjectValues (file://.//node_modules/@augment-vir/common/dist/augments/object/map-values.js:40:58)\\\\n    at parseStrippedArgs (file://.//node_modules/cli-vir/dist/parse-args.js:127:28)\\\\n    at parseArgs (file://.//node_modules/cli-vir/dist/parse-args.js:244:12)\\\\n    at runMonoVirCli (.//node_modules/mono-vir/src/cli/cli.ts:13:35)\\\\n    at <anonymous> (.//node_modules/mono-vir/src/cli/cli.script.ts:5:7)\\\\u001b[0m\\\\n\\",\\"exitCode\\":1,\\"args\\":\\"fake-command npm run --silent mono-vir-test:success\\"}"
`;

exports[`cli > for-each: successfully runs for-each 1`] = `
"{\\"stdout\\":\\"\\\\u001b[31m[common]\\\\u001b[0m .//test-files/augment-vir/packages/common\\\\u001b[0m\\\\n\\\\u001b[31m[common]\\\\u001b[0m exited with exit code 0.\\\\u001b[0m\\\\n\\\\u001b[33m[testing]\\\\u001b[0m .//test-files/augment-vir/packages/testing\\\\u001b[0m\\\\n\\\\u001b[33m[testing]\\\\u001b[0m exited with exit code 0.\\\\u001b[0m\\\\n\\\\u001b[32m[browser-testing]\\\\u001b[0m .//test-files/augment-vir/packages/browser-testing\\\\u001b[0m\\\\n\\\\u001b[32m[browser-testing]\\\\u001b[0m exited with exit code 0.\\\\u001b[0m\\\\n\\\\u001b[36m[chai]\\\\u001b[0m .//test-files/augment-vir/packages/chai\\\\u001b[0m\\\\n\\\\u001b[36m[chai]\\\\u001b[0m exited with exit code 0.\\\\u001b[0m\\\\n\\\\u001b[34m[browser]\\\\u001b[0m .//test-files/augment-vir/packages/browser\\\\u001b[0m\\\\n\\\\u001b[34m[browser]\\\\u001b[0m exited with exit code 0.\\\\u001b[0m\\\\n\\\\u001b[35m[element-vir]\\\\u001b[0m .//test-files/augment-vir/packages/element-vir\\\\u001b[0m\\\\n\\\\u001b[35m[element-vir]\\\\u001b[0m exited with exit code 0.\\\\u001b[0m\\\\n\\\\u001b[30m[node-js]\\\\u001b[0m .//test-files/augment-vir/packages/node-js\\\\u001b[0m\\\\n\\\\u001b[30m[node-js]\\\\u001b[0m exited with exit code 0.\\\\u001b[0m\\\\n\\\\u001b[37m[common-tests]\\\\u001b[0m .//test-files/augment-vir/packages/common-tests\\\\u001b[0m\\\\n\\\\u001b[37m[common-tests]\\\\u001b[0m exited with exit code 0.\\\\u001b[0m\\\\n\\\\u001b[31m\\\\u001b[7m[docker]\\\\u001b[0m .//test-files/augment-vir/packages/docker\\\\u001b[0m\\\\n\\\\u001b[31m\\\\u001b[7m[docker]\\\\u001b[0m exited with exit code 0.\\\\u001b[0m\\\\n\\\\u001b[33m\\\\u001b[7m[prisma-node-js]\\\\u001b[0m .//test-files/augment-vir/packages/prisma-node-js\\\\u001b[0m\\\\n\\\\u001b[33m\\\\u001b[7m[prisma-node-js]\\\\u001b[0m exited with exit code 0.\\\\u001b[0m\\\\n\\\\u001b[32m\\\\u001b[7m[scripts]\\\\u001b[0m .//test-files/augment-vir/packages/scripts\\\\u001b[0m\\\\n\\\\u001b[32m\\\\u001b[7m[scripts]\\\\u001b[0m exited with exit code 0.\\\\u001b[0m\\\\n\\\\n\\\\n\\\\u001b[1mRunStorm Summary:\\\\u001b[0m\\\\n        \\\\u001b[34m[browser]\\\\u001b[0m \\\\u001b[32m\\\\u001b[1msucceeded.\\\\u001b[0m\\\\n\\\\u001b[32m[browser-testing]\\\\u001b[0m \\\\u001b[32m\\\\u001b[1msucceeded.\\\\u001b[0m\\\\n           \\\\u001b[36m[chai]\\\\u001b[0m \\\\u001b[32m\\\\u001b[1msucceeded.\\\\u001b[0m\\\\n         \\\\u001b[31m[common]\\\\u001b[0m \\\\u001b[32m\\\\u001b[1msucceeded.\\\\u001b[0m\\\\n   \\\\u001b[37m[common-tests]\\\\u001b[0m \\\\u001b[32m\\\\u001b[1msucceeded.\\\\u001b[0m\\\\n         \\\\u001b[31m\\\\u001b[7m[docker]\\\\u001b[0m \\\\u001b[32m\\\\u001b[1msucceeded.\\\\u001b[0m\\\\n    \\\\u001b[35m[element-vir]\\\\u001b[0m \\\\u001b[32m\\\\u001b[1msucceeded.\\\\u001b[0m\\\\n        \\\\u001b[30m[node-js]\\\\u001b[0m \\\\u001b[32m\\\\u001b[1msucceeded.\\\\u001b[0m\\\\n \\\\u001b[33m\\\\u001b[7m[prisma-node-js]\\\\u001b[0m \\\\u001b[32m\\\\u001b[1msucceeded.\\\\u001b[0m\\\\n        \\\\u001b[32m\\\\u001b[7m[scripts]\\\\u001b[0m \\\\u001b[32m\\\\u001b[1msucceeded.\\\\u001b[0m\\\\n        \\\\u001b[33m[testing]\\\\u001b[0m \\\\u001b[32m\\\\u001b[1msucceeded.\\\\u001b[0m\\\\n\\\\n\\\\n\\",\\"stderr\\":\\"\\",\\"exitCode\\":0,\\"args\\":\\"for-each npm run --silent mono-vir-test:success\\"}"
`;
